<!DOCTYPE html>
<html>
  <head>
    <title>You Won!</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </head>
  <body>
    <div class="container">

          <div class="header-container">
            <div class="logo-text">
                <img class="logo" id="logo" src="{{ url_for('static', filename='img/logo.png') }}">
                <h2 class="header">You Win!</h2>
            </div>
            {% if logged_in %}
                <div class="logout">
                    <a id="openLogoutModal" class="logout-button">
                        <img class="button-icon" src="/static/img/logout.png" />
                    </a>
                </div>
            {% endif %}
          </div>

          <div id="logoutModal" class="login-popup-overlay">
            <div class="login-popup">
                <div class="logout-section">
                    <span class="close">&times;</span>
                    <h2>Logout</h2>
                    <p>Are you sure you want to log out?</p>
                    <div class="button-container2">
                        <button class="confirm-logout">Yes, Logout</button>
                        <button class="cancel-logout">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
          window.addEventListener('load', function() {
              // Get the modal
              var modal = document.getElementById("logoutModal");
      
              // Get the button that opens the modal
              var btn = document.getElementById("openLogoutModal");
      
              // Get the <span> element that closes the modal
              var span = document.getElementsByClassName("close")[0];
      
              // Get the cancel button
              var cancelBtn = document.getElementsByClassName("cancel-logout")[0];
      
              // When the user clicks the button, open the modal 
              btn.onclick = function() {
                  modal.style.display = "flex";
              }
      
              // When the user clicks on <span> (x), close the modal
              span.onclick = function() {
                  modal.style.display = "none";
              }
      
              // When the user clicks on cancel button, close the modal
              cancelBtn.onclick = function() {
                  modal.style.display = "none";
              }
      
              // When the user clicks anywhere outside of the modal, close it
              window.onclick = function(event) {
                  if (event.target == modal) {
                      modal.style.display = "none";
                  }
              }
      
              document.querySelector('.confirm-logout').addEventListener('click', function() {
                  window.location.href = "{{ url_for('logout') }}";
              });
          })
      </script>

        <div class="left-right-container">
        
            <div class="left-container">
                <img class="img-pad" id="hangman-image" src="{{ url_for('static', filename='img/stage0.png') }}">

                <script>
                    window.onload = function() {
                        var lives = {{ lives }};
                        var hangmanImage = document.getElementById("hangman-image");
                        
                        if (lives == 6) {
                            hangmanImage.src = "{{ url_for('static', filename='img/stage0.png') }}";
                        } else if (lives == 5) {
                            hangmanImage.src = "{{ url_for('static', filename='img/stage1.png') }}";
                        } else if (lives == 4) {
                            hangmanImage.src = "{{ url_for('static', filename='img/stage2.png') }}";
                        } else if (lives == 3) {
                            hangmanImage.src = "{{ url_for('static', filename='img/stage3.png') }}";
                        } else if (lives == 2) {
                            hangmanImage.src = "{{ url_for('static', filename='img/stage4.png') }}";
                        } else if (lives == 1) {
                            hangmanImage.src = "{{ url_for('static', filename='img/stage5.png') }}";
                        } else if (lives == 0){
                            hangmanImage.src = "{{ url_for('static', filename='img/stage6.png') }}";
                        } 
                    }
                </script>

            </div>
            
            <div class="right-container">
                
                <h3 class="text-pad"><p>The answer was {{ word }}.</p></h3>
        
                {% if stats %}
                  <table>
                    <tbody>
                      <tr>
                        <td>Wins:</td>
                        <td class="cell-value">{{ stats[1] }}</td>
                      </tr>
                      <tr>
                        <td>Losses:</td>
                        <td class="cell-value">{{ stats[2] }}</td>
                      </tr>
                      <tr>
                        <td>W/L Ratio:</td>
                        <td class="cell-value">{{ stats[3] }}</td>
                      </tr>
                      <tr>
                        <td>Current Win Streak:</td>
                        <td class="cell-value">{{ stats[4] }}</td>
                      </tr>
                      <tr>
                        <td>Longest Win Streak:</td>
                        <td class="cell-value">{{ stats[5] }}</td>
                      </tr>
                    </tbody>
                  </table>
                {% else %}
                  <p></p>
                {% endif %}
                
            </div>
            
        </div>

        <div class="start-new-game-container">
            <form action="/category" method="post">
                <button class="start-button" type="submit">PLAY AGAIN</button>
            </form>
        </div>

    </div>
  </body>
</html>
